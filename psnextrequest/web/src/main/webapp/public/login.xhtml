<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/template/layout.xhtml">
	
	<ui:define name="content">
		<h2>Authentification</h2>
		
		<h:form rendered="#{sessionBean.loggedIn}">
			<p>Bienvenue, #{sessionBean.user.userFirstName} vous êtes déjà authentifié(e). </p>
			<h:commandButton class="h160 buttons" action="toRequestsConsult" value="Retour" immediate="true"/>
		</h:form>
		
		<h:form id="form" rendered="#{!sessionBean.loggedIn}">

			<div class="command">
				
				<div class="line" id="loginCenterDiv" >
					
					<p>Entrez votre identifiant (login) et votre mot de passe puis cliquez sur le bouton Connexion ci-dessous pour continuer.</p>
					
					<p:messages id="msg" autoUpdate="true" closable="true" />
					
					
					<div class="section">
						<h:outputLabel 
							for="login"
							value="Nom d'utilisateur: ">
						</h:outputLabel>
						<h:inputText
							name="login" 
							id="login" 
							value="#{loginController.login}">
						</h:inputText>
					</div>
					
					<div class="section">
						<h:outputLabel 
							for="password" 
							value="Mot de passe: ">
						</h:outputLabel>
						<h:inputSecret 
							redisplay="false" 
							name="password" 
							id="password" 
							value="#{loginController.password}">
						</h:inputSecret> 
					</div>
					
					<div class="section">
						<h:link value="Créer un nouveau compte" 
								outcome="toUserCreation">
						</h:link> 
						| 
						<h:link value="Mot de passe oublié" 
								outcome="toRestorePassword">
						</h:link>
					</div>
				</div>
				<div id="loginBtn">
					<h:commandButton 
						id="loginControllerBtn" 
						class="buttons" 
						action="#{loginController.handleConnexion}" 
						value="Se connecter">
					</h:commandButton>
				</div>
								
				<div class="h80"> </div>
			</div>
		
		</h:form>	
		
		<script type="text/javascript"> 	
			window.onload = function() {
    			document.getElementById('form:login').focus();
			}
    	</script>
			
	</ui:define>
</ui:composition>